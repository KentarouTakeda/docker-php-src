version: '3'
services:

  build:
    build:
      context: containers/build/
    command: tail -f /dev/null
    environment:
      - PGHOST=pgsql
      - PGUSER=postgres
      - LANG=C.UTF-8
      # For Testing
      - PDO_FIREBIRD_TEST_DATABASE=test.fdb
      - PDO_FIREBIRD_TEST_DSN=firebird:dbname=firebird:test.fdb
      - PDO_FIREBIRD_TEST_PASS=test
      - PDO_FIREBIRD_TEST_USER=test

    volumes:
      - ./containers/mysql/my.cnf:/home/build/.my.cnf:ro
      - build-php-src:/home/build/php-src

  pgsql:
    image: postgres
    environment:
      - POSTGRES_HOST_AUTH_METHOD=trust
  
  mysql:
    image: mysql
    environment:
      - MYSQL_ALLOW_EMPTY_PASSWORD=1
      - MYSQL_USER=test
      - MYSQL_DATABASE=test
      - MYSQL_PASSWORD=test

  firebird:
    image: jacobalberty/firebird
    environment:
      - ISC_PASSWORD=test
      - FIREBIRD_DATABASE=test.fdb
      - FIREBIRD_USER=test
      - FIREBIRD_PASSWORD=test

volumes:
  build-php-src:
